specVersion: 0.0.2
schema:
  file: ./schema.graphql
dataSources:
  - kind: ethereum/contract
    name: TrustFactory
    network: mumbai
    source:
      address: "0x191F93ce7E36D56DAffbDf1D91443fd9D4dCf59D"
      abi: TrustFactory
      startBlock: 22165656
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      entities:
        - NewContract
      abis:
        - name: TrustFactory
          file: ./abis/TrustFactory.json
        - name: Trust
          file: ./abis/Trust.json
        - name: BPool
          file: ./abis/BPool.json
        - name: ERC20
          file: ./abis/ERC20.json
        - name: RedeemableERC20
          file: ./abis/RedeemableERC20.json
        - name: RedeemableERC20Pool
          file: ./abis/RedeemableERC20Pool.json
        - name: SeedERC20
          file: ./abis/SeedERC20.json
      eventHandlers:
        - event: NewChild(address,address)
          handler: handleNewChild
      file: ./src/trustFactory.ts
templates:
  - kind: ethereum/contract
    name: TrustTemplate
    network: mumbai
    source:
      abi: Trust
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.4
      language: wasm/assemblyscript
      entities:
        - Construction(address,address,address,address,address,uint256,uint256)
        - CreatorFundsRelease(address,address,uint256)
        - EndDutchAuction(address,uint256,uint256,uint256,uint256,uint256)
        - Initialize((address,uint256,uint256,uint256,uint256,address,uint256,uint256,uint256),address,address,address,uint256)
        - Notice(address,bytes)
        - PhaseScheduled(address,uint256,uint256)
        - StartDutchAuction(address,address,uint256)
      abis:
        - name: Trust
          file: ./abis/Trust.json
      eventHandlers:
        - event: Construction(address,address,address,address,address,uint256,uint256)
          handler: handleConstruction
        - event: CreatorFundsRelease(address,address,uint256)
          handler: handleCreatorFundsRelease
        - event: EndDutchAuction(address,uint256,uint256,uint256,uint256,uint256)
          handler: handleEndDutchAuction
        - event: Initialize((address,uint256,uint256,uint256,uint256,address,uint256,uint256,uint256),address,address,address,uint256)
          handler: handleInitialize
        - event: Notice(address,bytes)
          handler: handleNotice
        - event: PhaseScheduled(address,uint256,uint256)
          handler: handlePhaseScheduled
        - event: StartDutchAuction(address,address,uint256)
          handler: handleStartDutchAuction
      file: ./src/trust.ts